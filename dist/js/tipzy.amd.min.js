var _tipzy=function(a,b){var c={_tips:[],pageStats:{}},d=10,e=function(a,b){return 100*b/a},f=function(){var a="_tipzy-"+Math.round(1e5*Math.random());return b("#"+a).length<=0?a:f()},g=function(a){var g={$anchor:a,$tip:"",anchorDims:{},tipDims:{}};return g.position=function(){g.tipDims.x=g.anchorDims.x+g.tipDims.tipxOffset-.5*g.tipDims.w,g.tipDims.y=g.anchorDims.y-g.tipDims.tipyOffset-g.tipDims.h;var a=50,b="bottom";switch(!0){case g.tipDims.x<=0:g.tipDims.x=0,a=5*Math.floor(e(g.tipDims.x+g.tipDims.w,g.anchorDims.x+.5*g.anchorDims.w)/5);break;case g.tipDims.x+g.tipDims.w-c.pageStats.L>=c.pageStats.W:g.tipDims.x=c.pageStats.W-(g.tipDims.w-c.pageStats.L),a=5*Math.floor(e(g.tipDims.w,g.anchorDims.x+.5*g.anchorDims.w-g.tipDims.x)/5)}(g.tipDims.y<d||g.tipDims.y<c.pageStats.T)&&(b="top",g.tipDims.y=g.anchorDims.y+g.anchorDims.h+g.tipDims.tipyOffset),console.log("_me.anchorDims",g.anchorDims),console.log("_me.tipDims",g.tipDims),g.$tip.css({left:g.tipDims.x,top:g.tipDims.y}).attr({"data-tipzyleft":Math.abs(a)+"%","data-tipzyv":b})},g.updateTipDims=function(){g.tipDims={w:g.$tip.outerWidth(),h:g.$tip.outerHeight(),tipxOffset:.5*g.anchorDims.w,tipyOffset:5}},g.updateAnchorDims=function(){g.anchorDims={w:a[0].offsetWidth,h:a[0].offsetHeight,x:a.offset().left,y:a.offset().top}},g.show=function(){g.position(),g.$tip.attr("aria-hidden","false")},g.hide=function(){g.$tip.attr("aria-hidden","true")},g.parse=function(){a.addClass("_tipzy_bound"),g.updateAnchorDims();var c=f();g.$tip=b('<div id="'+c+'" class="_tipzy">'),b("body").append(g.$tip),g.$tip.attr({role:"tooltip","aria-hidden":"true"}).on("touchstart",function(a){a.stopPropagation()}).on("mouseover focus",function(a){g.show()}).on("mouseleave blur",function(a){g.hide()}).append('<div class="_tipzy_content">'+a.data("tipzycontent")+"</div>"),g.updateTipDims(),a.attr({"aria-describedby":c,"data-tipzytitle":a.attr("title")}).removeAttr("title").on("focus mouseover",function(a){console.log("anchor mouseover"),g.updateAnchorDims(),g.show()}).on("blur mouseout",function(a){g.hide()})},g.parse(),g};return c.updatePageStats=function(){c.pageStats={W:a.innerWidth,H:a.innerHeight,L:a.pageXOffset,T:a.pageYOffset}},c.hideAll=function(){b.each(c._tips,function(a,b){c._tips[a].hide()})},c.updateAllAnchors=function(){b.each(c._tips,function(a,b){c._tips[a].updateAnchorDims()})},c.parseTips=function(){b("._tipzy_anchor:not('._tipzy_bound')").each(function(){var a=b(this);if(a.inView(0)){var d=new g(a);console.log("parse : ",d),c._tips.push(d)}})},c.init=function(){c.updatePageStats(),c.parseTips(),b(document).ready(function(){b(window).on("touchstart",function(a){c.hideAll()}).on("scrollStopped",function(a){c.updatePageStats(),c.parseTips()}).on("resizeStopped",function(a){c.updatePageStats(),c.parseTips()})})},c}(window,jQuery);